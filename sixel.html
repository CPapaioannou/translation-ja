<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML LANG="EN-US">
<HEAD>
<TITLE>VT100.net: VT330/VT340 プログラマーリファレンスマニュアル</TITLE>
<LINK HREF="vt330.css" TYPE="text/css" REL="stylesheet">
</HEAD>
<BODY>
<DIV CLASS="navbar"><A HREF="http://www.vt100.net/">VT100.net</A> VT330/VT340 プログラマーレファレンスマニュアル Volume 2: グラフィックスプログラミング
</DIV>
<dl>
  <dt>原著:</dt>
  <dd><a href="http://www.vt100.net/docs/vt3xx-gp/chapter14.html"> http://www.vt100.net/docs/vt3xx-gp/chapter14.html</a></dd>
  <dt>訳者:</dt>
  <dd>佐藤文優 (2014-09-07)</dd>
</div>
<HR>
<H1 ID="S14"><SPAN CLASS="chapnum">14</SPAN> Sixel グラフィックス</H1>
<H2 ID="S14.1">Sixels とは?</H2>
<P>
VT300 は Sixel グラッフィックスデータの送受信に対応しています。
Sixel データでモノクロあるいはカラー (VT340 のみ) のイメージを描画することができます。
</P>
<P>
<DFN>Sixel</DFN> は 6 つの縦列のピクセルの集合です。
ピクセル (画像の要素) は、ビデオスクリーン上に表示可能な最小の単位です。
Sixel はグラフィックスイメージのビットマップデータを表現します。
端末は Sixel データをビットマップ情報として処理します。
ビット値の 1 はピクセルのオン、0 はオフを意味します。
</P>
<P>
各 Sixel ごとに 1 つの文字コードを使用します。
端末は、Sixel を現わす 1 つの
8 ビット文字コードのうち 6 ビットにエンコードされたビットマップデータを用います。
</P>
<P>
Sixel で文字セットやフォントをデザインして表示することができます。
本マニュアルの Volume 1, Chapter 5 にて、
ソフト文字セットをデザインして端末にロードする手順を解説しています。
</P>
<H2 ID="S14.2">Sixel データ形式</H2>
<P>
VT300 は、デバイス制御文字列を用いて Sixel イメージを送受信します。
</P>
<P CLASS="note">注意:
デバイス制御文字列についての情報は本マニュアルの Volume 1, Chapter 2 を参照のこと。
</P>
<P>
Digital 社のプリンターの多くは制御文字列フォーマットを受け付けます。
以下に対応プリンターの例を挙げます.
</P>
<UL>
<LI>LA12</LI>
<LI>LA50</LI>
<LI>LA100</LI>
<LI>LA34-VA</LI>
<LI>LN03</LI>
</UL>
<P>
プリンターは機種ごとに異なる出力品質を持ちます。
例えば、
ドットマトリックスプリンターはレーザープリンターとはかなり異なります。
端末上で印刷用の Sixel イメージをデザインする場合は、
プリンターに適したパラメーター値を用いなければなりません。
詳細は、お使いのプリンターのプログラマーリファレンスマニュアルを参照してください。
</P>
<H3 ID="S14.2.1">デバイス制御文字列</H3>
<P>デバイス制御文字列の形式は以下の通りです。</P>
<DIV CLASS="example"><TABLE CLASS="codeseq">
<TBODY>
<TR>
<TH>DCS</TH>
<TH>P1</TH>
<TH>;</TH>
<TH>P2;</TH>
<TH>P3;</TH>
<TH>q</TH>
<TH>s..s</TH>
<TH>ST</TH>
</TR>
<TR>
<TD>9/0</TD>
<TD>**</TD>
<TD>3/11</TD>
<TD>**</TD>
<TD>**</TD>
<TD>7/1</TD>
<TD>***</TD>
<TD>9/12</TD>
</TR>
</TBODY>
</TABLE></DIV>
<DIV CLASS="example"><P>
<B>DCS</B> は C1 制御文字であり、Sixel データ列の開始を示します。
7 ビット環境では DCS はエスケープシーケンス ESC P でも表すことができます。
</P>
<P>
<B>P1</B> はマクロパラメーターであり、
アプリケーションあるいは端末で使用されるピクセルのアスペクト比を示します。
ピクセルのアスペクト比は、
端末がイメージを描画する際に用いるピクセルのドット形状を定義します。
例えば、ドットの縦幅が横幅の 2 倍の場合、アスペクト比は 2:1 になります。
以下は P1 に指定できる値の一覧です。
</P>
<P CLASS="note">注意:
マクロパラメーターは、既存の
Digital 社製ソフトウェアとの互換性のために用意されています。
新しいアプリケーションは、 P1 は 0 に設定し、
代わりにラスター属性制御(後述)をセットしてください。
</P>
<TABLE CLASS="dpadded">
<THEAD>
<TR VALIGN="BOTTOM">
<TH>P1</TH>
<TH>ピクセルのアスペクト比<BR>(縦:横)</TH>
</TR>
</THEAD>
<TBODY>
<TR>
<TD><STRONG>省略</STRONG></TD>
<TD><STRONG>2:1</STRONG> (デフォルト)</TD>
</TR>
<TR>
<TD>0, 1</TD>
<TD>2:1</TD>
</TR>
<TR>
<TD>2</TD>
<TD>5:1</TD>
</TR>
<TR>
<TD>3, 4</TD>
<TD>3:1</TD>
</TR>
<TR>
<TD>5, 6</TD>
<TD>2:1</TD>
</TR>
<TR>
<TD>7, 8, 9</TD>
<TD>1:1</TD>
</TR>
</TBODY>
</TABLE>
<P>
マクロパラメーターの設定は、Sixel データ文字列中でラスター属性文字 ("、2/2)
をセットすることで上書きできます。下記を参照のこと。
 See below.</P>
<P>
DCS 文字列中の数値パラメーターはセミコロン <B>;</B> (3/11) で区切ります。 
</P>
<P>
<B>P2</B> は背景色の描画方式を選択します。
次の 3 つから 1 つを選択します。
</P>
<TABLE CLASS="dpadded">
<THEAD>
<TR VALIGN="BOTTOM">
<TH>P2</TH>
<TH>意味</TH>
</TR>
</THEAD>
<TBODY>
<TR VALIGN="TOP">
<TD><STRONG>0</STRONG> または 2 (デフォルト)</TD>
<TD>ピクセルに 0 が指定された場所は現在の背景色で描画される。</TD>
</TR>
<TR VALIGN="TOP">
<TD>1</TD>
<TD>ピクセルに 0 が指定された場所は現在の色のままになる。</TD>
</TR>
</TBODY>
</TABLE>
<P>
<B>P3</B> は水平グリッドサイズのパラメーターです。
水平グリッドサイズは 2 つのピクセルドット間の幅です。
VT300 ではこのパラメーターは無視され、
水平グリッドサイズは 0.0195 cm (0.0075 インチ) に固定されています。
</P>
<P>
<B>q</B> は、このデバイス制御文字列が Sixel コマンドであることを示します。</P>
<P>
<B>s...s</B> は Sixel エンコードされたデータ文字列です。
<DFN>Sixel データ文字</DFN> は、
? (0x3F) から ~ (0x7E) の範囲の文字です。
各 Sixel データ文字は、縦 6 つ分のピクセルであり、
文字コードの値から 0x3F を引いたバイナリー値を表します。
</P>
<P><STRONG>例</STRONG></P>
<UL>
<LI>? (0x3F) はバイナリー値 000000 を表す。</LI>
<LI>t (0x74) はバイナリー値 110101 を表す。</LI>
<LI>~ (0x7E) はバイナリー値 111111 を表す。</LI>
</UL>
<P>
端末はこの 6 ビットの値を <EM>Sixel</EM> (縦の 6 つのピクセル) と解釈します。
最下位のビットが一番上のピクセルになります。
</P>
<P CLASS="note">注意:
Sixel 文字を作成する手順については、
本マニュアルの Volume 1, Chapter 5「ソフト文字セット」を参照してください。
</P>
<P>
Sixel データ文字列中には Sixel 制御機能も使用することができます。
次の説で制御文字と機能について解説します。
</P>
<P>
<B>ST</B> は文字列の終端を示します。
ST は C1 制御文字です。
7 ビット環境では ST はエスケープシーケンス ESC \ でも表すことができます。
</P></DIV>
<H2 ID="S14.3">Sixel 制御機能</H2>
<P>
特殊な機能を実行するには Sixel 制御機能を利用します。
例えば色やラスター属性を選択できます。
</P>
<H3 ID="S14.3.1">グラフィックスの繰り返しの開始 (!)</H3>
<P>文字 ! (2/1) は繰り返しの開始を示します。
以下の形式で指定した回数だけグラフィックスを繰り返し描画することができます。
</P>
<DIV CLASS="example"><TABLE CLASS="codeseq">
<TBODY>
<TR>
<TH>!</TH>
<TH>Pn</TH>
<TH>character</TH>
</TR>
<TR>
<TD>2/1</TD>
<TD>**</TD>
<TD>****</TD>
</TR>
</TBODY>
</TABLE></DIV>
<P>where</P>
<DIV CLASS="example"><P><B>Pn</B> is the repeat count. The repeat count can be any decimal value. For
example, if you use a repeat count of 23, the next character repeats 23
times.</P>
<P><B>character</B> is the character to repeat. You can use any character in the
range of ? (hex 3F) to ~ (hex 7E).</P></DIV>
<H3 ID="S14.3.2">Raster Attributes (")</H3>
<P>The " (2/2) character is the set raster attributes command. This command selects
the raster attributes for the sixel data string that follows it. You must use
the command before any sixel data string. The " command overrides any raster
attributes set by the macro parameter described above. You use the following
format for the " command.</P>
<DIV CLASS="example"><TABLE CLASS="codeseq">
<TBODY>
<TR>
<TH>"</TH>
<TH>Pan</TH>
<TH>;</TH>
<TH>Pad;</TH>
<TH>Ph;</TH>
<TH>Pv</TH>
</TR>
<TR>
<TD>2/2</TD>
<TD>**</TD>
<TD>3/11</TD>
<TD>**</TD>
<TD>**</TD>
<TD>**</TD>
</TR>
</TBODY>
</TABLE></DIV>
<P>where</P>
<DIV CLASS="example"><P><B>Pan</B> and <B>Pad</B> define the pixel aspect ratio for the following sixel data
string. Pan is the numerator, and Pad is the denominator.</P>
<PRE>Pan
--- = pixel aspect ratio
Pad</PRE>
<P>The pixel aspect ratio defines the shape of the pixels the terminal uses to
draw the sixel image.</P>
<P>Pan defines the vertical shape of the pixel. Pad defines the horizontal
shape of the pixel. For example, to define a pixel that is twice as high as
it is wide, you use a value of 2 for Pan and 1 for Pad.</P>
<P>If you use the set raster attributes command (") in a sixel data string, you
must specify a pixel aspect ratio. You can only use integer values for Pan
and Pad. The VT300 rounds the pixel aspect ratio to the nearest integer.</P>
<P><B>Ph</B> and <B>Pv</B> define the horizontal and vertical size of the image (in pixels),
respectively.</P>
<P>Ph and Pv do <EM>not</EM> limit the size of the image defined by the sixel data.
However, Ph and Pv let you omit background sixel data from the image
definition and still have a color background. They also provide a concise
way for the application or terminal to encode the size of an image.</P>
<P CLASS="note">NOTE: The VT300 uses Ph and Pv to erase the background when P2 is
set to 0 or 2.</P></DIV>
<H3 ID="S14.3.3">Color Introducer (#)</H3>
<P>The # (2/3) color introducer starts a color selection sequence. There are two
ways to select colors.</P>
<UL>
<LI>Select a color map entry by number.</LI>
<LI>Use HLS (hue, lightness, and saturation) or RGB (red, green, blue) colors.</LI>
</UL>
<H3 ID="S14.3.3.1">Basic Colors</H3>
<P>You can use the following format to select a basic color map entry.</P>
<DIV CLASS="example"><TABLE CLASS="codeseq">
<TBODY>
<TR>
<TH>#</TH>
<TH>Pc</TH>
</TR>
<TR>
<TD>2/3</TD>
<TD>**</TD>
</TR>
</TBODY>
</TABLE></DIV>
<P>where</P>
<DIV CLASS="example"><P><B>Pc</B> is the color number (<A HREF="#T14-1">Table 14-1</A>).</P></DIV>
<P CLASS="note">NOTE: The VT330 has 4 available color map entries, the VT340 has 16.</P>
<H3 ID="S14.3.3.2">HLS or RGB Colors</H3>
<P>You use the following format to specify HLS or RGB
colors. HLS and RGB are universally recognized color coordinate systems.</P>
<DIV CLASS="example"><TABLE CLASS="codeseq">
<TBODY>
<TR>
<TH>#</TH>
<TH>Pc</TH>
<TH>;</TH>
<TH>Pu;</TH>
<TH>Px;</TH>
<TH>Py;</TH>
<TH>Pz</TH>
</TR>
<TR>
<TD>2/3</TD>
<TD>**</TD>
<TD>3/11</TD>
<TD>**</TD>
<TD>**</TD>
<TD>**</TD>
<TD>**</TD>
</TR>
</TBODY>
</TABLE></DIV>
<P>where</P>
<DIV CLASS="example"><P><B>Pc</B> is the color number.</P>
<P><B>Pu</B> is the color coordinate system (HLS or RGB).</P>
<P><B>Px</B>, <B>Py</B>, and <B>Pz</B> are the color coordinates in the specified system. <A HREF="#T14-1">Table
14-1</A> lists the possible values.</P></DIV>
<TABLE ID="T14-1" CLASS="majortable">
<CAPTION>Table 14-1 Color Specifier</CAPTION>
<THEAD>
<TR>
<TH>Parameter</TH>
<TH>Possible Values</TH>
<TH>Definition</TH>
</TR>
</THEAD>
<TBODY>
<TR VALIGN="TOP">
<TD>Pc</TD>
<TD>0 to 255</TD>
<TD>The color number to define.</TD>
</TR>
<TR VALIGN="TOP">
<TD>Pu (required)</TD>
<TD>1<BR>2</TD>
<TD>HLS (hue, lightness, and saturation)<BR>RGB (red, green, and blue)</TD>
</TR>
<TR VALIGN="TOP">
<TD COLSPAN="3"><P CLASS="note">NOTE: The values of the following parameters depend on the color coordinate
system selected (HLS or RGB).</P></TD>
</TR>
<TR VALIGN="TOP">
<TH COLSPAN="3">HLS Values</TH>
</TR>
<TR VALIGN="TOP">
<TD>Px</TD>
<TD>0 to 360 degrees</TD>
<TD>Hue angle</TD>
</TR>
<TR VALIGN="TOP">
<TD>Py</TD>
<TD>0 to 100 percent</TD>
<TD>Lightness</TD>
</TR>
<TR VALIGN="TOP">
<TD>Pz</TD>
<TD>0 to 100 percent</TD>
<TD>Saturation</TD>
</TR>
<TR VALIGN="TOP">
<TH COLSPAN="3">RGB Values</TH>
</TR>
<TR VALIGN="TOP">
<TD>Px</TD>
<TD>0 to 100 percent</TD>
<TD>Red intensity</TD>
</TR>
<TR VALIGN="TOP">
<TD>Py</TD>
<TD>0 to 100 percent</TD>
<TD>Green intensity</TD>
</TR>
<TR VALIGN="TOP">
<TD>Pz</TD>
<TD>0 to 100 percent</TD>
<TD>Blue intensity</TD>
</TR>
<TR VALIGN="TOP">
<TD COLSPAN="3"><P CLASS="note">NOTE: See the "<A HREF="chapter2.html#S2.4">Output Mapping</A>" section in <A HREF="chapter2.html">Chapter 2</A> for a discussion of
shade and color programming.</P></TD>
</TR>
</TBODY>
</TABLE>
<H3 ID="S14.3.4">Graphics Carriage Return ($)</H3>
<P>The $ (2/4) character indicates the end of the sixel line. The active position
returns to the left page border of the same sixel line. You can use this character
to overprint lines.</P>
<H3 ID="S14.3.5">Graphics New Line (-)</H3>
<P>The - (2/13) character indicates the end of a sixel line. The active position
moves to the left margin of the next sixel line.</P>
<H3 ID="S14.3.6">Parameter Separator (;)</H3>
<P>The ; (3/11) character separates numeric parameters in a device control string.
If there is no number before the separator, the terminal assumes that parameter
is 0. If there is a number after the separator, the terminal assumes that
parameter is 0.</P>
<H2 ID="S14.4">Sixel Scrolling Mode</H2>
<P>You can set the sixel scrolling mode by using the <B>Sixel Scrolling</B> feature in the
Graphics Set-Up screen. You can also select this mode by using the sixel
display mode (DECSDM) control function.</P>
<H3 ID="S14.4.1">Sixel Scrolling Enabled</H3>
<P>When sixel display mode is enabled, the sixel active position begins at the
upper-left corner of the ANSI text active position. Scrolling occurs when the
sixel active position reaches the bottom margin of the graphics page. When
sixel mode is exited, the text cursor is set to the current sixel cursor position.</P>
<P>The VT300 sends a sixel next line (-) character following a sixel dump. The top
line of the sixel image may scroll off the screen
if (1) your application returns the sixel dump to the terminal, or (2) you perform
a sixel dump to a video terminal connected to the VT300 printer port.</P>
<P CLASS="note">NOTE: You can prevent the sixel image from scrolling off the screen by disabling
the sixel scrolling feature.</P>
<H3 ID="S14.4.2">Sixel Scrolling Disabled</H3>
<P>When sixel scrolling is disabled, the sixel active position begins at the upper-left
corner of the active graphics page. The terminal ignores any commands
that attempt to advance the active position below the bottom margin of the
graphics page. When sixel mode is exited, the text cursor does not change from
the position it was in when sixel mode was entered.</P>
<H3 ID="S14.4.3">Sixel Display Mode Control Function</H3>
<P>You can set the sixel scrolling mode by using the sixel display mode
(DECSDM) control function.</P>
<P>When sixel display mode is set, the <B>Sixel Scrolling</B> feature is enabled. When
sixel display mode is reset, the <B>Sixel Scrolling</B> feature is disabled.</P>
<P>To set DECSDM, the control function is.</P>
<DIV CLASS="example"><TABLE CLASS="codeseq">
<TBODY>
<TR>
<TH>CSI</TH>
<TH>?</TH>
<TH>8</TH>
<TH>0</TH>
<TH>h</TH>
</TR>
<TR>
<TD>9/11</TD>
<TD>3/15</TD>
<TD>3/8</TD>
<TD>3/0</TD>
<TD>6/8</TD>
</TR>
</TBODY>
</TABLE></DIV>
<P>To reset DECSDM, the control function is.</P>
<DIV CLASS="example"><TABLE CLASS="codeseq">
<TBODY>
<TR>
<TH>CSI</TH>
<TH>?</TH>
<TH>8</TH>
<TH>0</TH>
<TH>l</TH>
</TR>
<TR>
<TD>9/11</TD>
<TD>3/15</TD>
<TD>3/8</TD>
<TD>3/0</TD>
<TD>6/12</TD>
</TR>
</TBODY>
</TABLE></DIV>
<DIV CLASS="navbar"><HR>
<TABLE WIDTH="100%">
<COL SPAN="3" WIDTH="33%">
<TBODY>
<TR>
<TD ALIGN="LEFT"><A HREF="chapter13.html">Chapter 13</A></TD>
<TD ALIGN="CENTER"><A HREF="contents.html">Contents</A></TD>
<TD ALIGN="RIGHT"><A HREF="chapter15.html">Chapter 15</A></TD>
</TR>
</TBODY>
</TABLE>
<DIV CLASS="navbot">http://vt100.net/docs/vt3xx-gp/chapter14.html</DIV></DIV>
</BODY>
</HTML>
